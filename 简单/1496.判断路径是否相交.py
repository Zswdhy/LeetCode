def isPathCrossing(path: str) -> bool:
    """
    开辟一个 2*l+1 的方阵，但是这样造成空间资源的浪费，leetcode运行超时
    :param path:
    :return:
    """
    l = len(path)
    array = [[0] * (2 * l + 1) for _ in range(2 * l + 1)]
    init_index = (2 * l + 1) // 2
    array[init_index][init_index] = 1
    row, col = init_index, init_index
    for item in path:
        if item == 'N':
            row -= 1
        elif item == 'S':
            row += 1
        elif item == 'W':
            col -= 1
        elif item == 'E':
            col += 1
        array[row][col] += 1
        if array[row][col] > 1:
            return True
    return True


def isPathCrossingPlus(path: str) -> bool:
    """
    每次只记录当前的坐标位置，坐标重复之后，即回到原点
    :param path:
    :return:
    """
    l = len(path)
    init_index = (2 * l + 1) // 2
    row, col = init_index, init_index
    res = [(row, col)]
    for item in path:
        if item == 'N':
            row -= 1
        elif item == 'S':
            row += 1
        elif item == 'W':
            col -= 1
        elif item == 'E':
            col += 1
        if (row, col) in res:
            return True
        else:
            res.append((row, col))
    return False


def isPathCrossingPlus_2(path: str) -> bool:
    dirs = {
        "N": (-1, 0),
        "S": (1, 0),
        "W": (0, -1),
        "E": (0, 1),
    }

    x, y = 0, 0
    vis = [(x, y)]
    for ch in path:
        dx, dy = dirs[ch]
        x, y = x + dx, y + dy
        if (x, y) in vis:
            return True
        vis.append((x, y))

    return False


if __name__ == '__main__':
    # path = "NESWW"
    # path = "NES"
    # path = "SN"
    # path = "SNWWESNNWSWESEEWWNESNWWWNSNSSSWEEESSWEESNNSWWSWSWWSWNWWNNNSSEENNSSEENSENSNENEWNNWWNSWEESSSWNNNENEEEEEWSWWWWSSSNSEWENWWENSNESWNWWENWWSNSEEWEESWWWNWWENNSSEESWEEEWSSWWWWWWSNENENNNEESEWWSWNNESSSSSNEEWNNNEWWNNNSESSNENWNSEWWNEEESESWENSNSWSSNNEEEEEEWEENSNEWWSWWWNSSNWSWNNSNWSNSNSWEENSWSNSESWWESENEWSNSNENNEWWNENSSEWNWENEENWSNWWNNWWWEWSSESSSNWWEENENWEWNSNENSNWWSSNNWSSWESENNEWWSNWWENSSNNENSEWNESWWNSENNENWSSSSESSWSWSWWNWEESEWSWENWESEESEEEEWESWNWEWENWNNWESWNWWWESSNWSSEENSEWEEWWNSSEEWENWSEWNWNSNESEWEEESWNWWNEWENENSWNEEWWWWWSNSNNSEWSWEWEEENSWSSNNSWWSNWNNENSNWEWWEEWNWNWWESEWWESNWSENEESESESSNEWWSSWNNWENSWSEESWENWNWWNENNNWNSNSENSWSSSEWNSSWSENEESNSSSSEWNNEENWSSESWNENSSWWWENEWWNENWEWEWSNWNNWWEEWNWEEENENWNNWSWNWWWEESNEEEEEEESNENNSWEESESWSSSSNNNSWNESSNNENNSWEWSSWSNSEESENEWESWSNNWWESESNESEEEEEWEESSEEWNSNNWNEEWNESNEENNENESWWSNSEEEWSEENENENNNNSNNSNESEWWSNWWNNWWESESSWSNSSEEWWWEEEWWWWSSWWNSNSSSWNSWWNENWNNSSENWSSNNWNSSNEESWNNSNSNNSWNNESESSWSSEENENNEWEWWSNESWSENNESNSNWWWNSNSEEEENNNWNSENWNENWNWENNWSWWSSSSNSWSNNEESWNNWNSESENSWWSWSSWENNWWWNEWSEWWSNNWWSEWWSESSSEESWSNSNWEESWESWNWWNEWENWWNEWWSWSEWENWNSWNSNEWENESWWWSWSEEESNWEWWWWSSEEWNNWNWSEEWWESESNESSNENWSWENSEEWNSSWNESWNENNEWNSSSWESNENSWNNWNESSWSNWWNWSEEWSNNSSNSNWEWSNESNWNESSSSESSWEENSEWESSWNEWWNNNENWNNENSNENNNWWEENSNWNWSWSENEESWESEEWNNNSNENNENWSENNNENWEEWSESNNWNSENNSNWWWSSNNWNEWWWENNNSNESENESESESNNENSWEWNSSSNNNWNENWESENWWENSWWSSNEWENNSNEWWWSWNWEWESEWWNWSWWEENNSEWWSSENSNSEWWEWEEWEWSSWWSENWSSSEENWSEEEWNWWNSNSWSWESENSNWENSEEEENWSNEEWSSNEESESNWWSWNNNWSSWENENESSWWEWNEENNSSNENSSNSENWESWWNWWSNENNWEWSWWEENESSSWWWNWEEWSWSWNNWWSSNSSEENNNNEESNWWSEWWNWWWWNEWENENSWNSENNWSWNWNWNWEWWSEWWENEEENEEESESENWENEWWNWSENSNSSWESSNEWNWENSSSNSSWWWNENNWWNEWSESWWEENENENWSSESESEESEWNEWENWWWSSNNSSSWWNSNSWEEEWSWNENENSEWESEWSWNSSNEWENNEEESWSNWSWWNSESNNEWWWEWNEWNNWSNSWEWENWNEEENESWNWWSSNSEESWENENSSWWSSWNWNENEEWEEEESNENNESSEESSWWNSSSSSESNNSSSEWWENNNSWNWNNWWNNENWSEWNWNESESNWNNSWWESSEEESSSWNSSWSWWNWWSEWWSWNWESNSWSNNESEENSWEEEEEEESSSNESWEENENNWENNENNENNWSSNSEWNSESSNWEWESWNNNWESNSNWWENESNEWNNENWSWSEWWSSNWNSWNSSSNSSNNEWSENEESWNNSWEWSESESNSSWESNNWNENENENESNNEEWWNWNWNSENESENESNNENNWSSSSWNENEEWSSWWEEWNWWEENNNNWNENSSSNWSEWNSNSESNSWEWWNEEWSNNENESEWEWENWNWNENNSNSNSEWNESSWNSNEENSWNENNSWNWEENSNWSNNESNNEEESENNWNNNSWSWNNEWENNEEWNNNWEEENNEESEENSWSEEWNWNNSSWSENESSSENEENNWSNNSWWSNNNSESNWENNSWNENSESNWESNNEWNSNEWEWWWNSWNENNNWWESEWSWNWENWEWEWNSWSWEESWNWNWWWEWEWEWESSEENWEEWSEWNEWNWNSSNNWWNSWSWESWEENSNWWSESNNNSEEWSSWSNNWEWNNSNSSNENSSNSEENEWENENSNEESSNENSSEEWESENWNSENWSENNEWSEESWNESWEESWEWSSNESESENSNESSWSEWNESSWSWWENSWWNESSWNEWWNSWEESWNSESESWWNWNSSSSSWWEENNNWEWNWNWESNSNWSESNWNSSEWESENSWNSNNWWNNSWSSNESEWENNSESSWSNWNESWSWESWSEWWNSWSNNSWWSNSNNESWSSESNENSESEWWSENWEWSSWSNWEWSWNEWNWEESNSNNSEWNNNWNWENNWWNSSNWSSSNNWNNWWWSSSENNWSNEESNENEEEEENNNNNWWEEWSWSWNNNWNEESWEENSEEEESWWSNWENENWENNNNSWSEWSSNNWNNENESESENEESWWSSEEWEEWNNNNNSEESWWEENSESWWSEWEEWSNEWSSNSNNWSNSNWNSWENWWSWWSNESESENNWSSNESESSSSSESWSENSWNSWNSWWEWNSEWWSSWESWSWWSWWSSSNSESEENNSWSNWEWSEWSNWESSSSNWSSSNWWWESNEWNWWWENSNEWESNSNWSSSEENSESWNNSSNWWEWENWSNNSSESEWNSNWWWWEWNESESNWNSENNENNEESWENEENNSESESEEWSSSSNNNSSWWNWNWNENESNSSSNWWEEWNSWWESSEWESSNSEWNWNSEWWEWSNWSSESSSNSENWNNNENEEWWNSSSSWEWSSWNSNSWWSNWNSWNEEENSWNWWWNNWWWSWNNNENNNSWNENENWEEESENSSESEENNNNWSWNSWSEWWNNEWWWWSENENEWNEENESNNNNNSSSNSESSSEEWEWSWWEENESSSEWSWSNWESNWNESSWNWSSNNSWNWEWNSSWWSSSESNESWWNNEENNESSSEESWSWWWSESEWWNEESEWSENSSENSSWWWSESSENESEWENWNWSWESNNNSSSSSEWWNNNEWNSEEWSNNNNENNESWEESWSSNWSNEWWSSWSSEWEEWNEEWENEWSSNWWWSNWENESSWNNWSWSNESEEWENNSNESNEEESENWNSWNNSEEWWENNWNSNWNSENWENENWWNSWSNENNEENSNNEWWESENEWNWSSNNSESNSEEEWWSSESEWEEEWSESSSENENSNNWWNSEEWNSNNEEWSSWENWNNNEWSEEWENWNENNWWWEWSEWSSNSWWSEEWESNESNWEWWNSSWNWSNENNWEWNNWENEESWEEEWWNEWWNNSWWWWESNSNNNSWWSENESNNWNWWNNNENSEWSWNWNSEESSWSSWNESWSNSNNESSNWNNWWSEWSEESNNWSNWSWWSSNNSNNNSWNSNWEWWENNENNNWNWSEWSNWWNWWEWWEWSENEEWWEWSWSESNSSSSWENNWNWESNSWSNNSWWNSENWNWENNWEEWWWEWEEEESSEEWSSEEEWNNNNEEWSWNNENWEEWNSENNSSSNEEEEWNEWWWNEEWNEWWSWNEWNWNEESSNSWWSSEENNNSEWESNWWSNNENWNWWWWNNSNNENSESWEWNNSWNESSEWNWWEEEENESNSWNSWNSNNSSNNNNNNSSEENWSNSWWNSWWNESEESNSWENSEESWEESSSSWWENSEENEWSEWSEENEWNSWEWEWNWEEENWESEESNNEEENSWEWSSSSNWWSWSENSSENWWEEESESSNESENWWSESESWWWEESEESESSNNSSWSEESENESWWWSNNNNENESEESSNWSWNSNSESENWWEWEWWNWSWWSNWSEWWEENENWSSWNSSWEESSENEENNWNWWSEEEWNSNNEWSWSNENNENENEEESWSSSESENWWWNNESEESSWWWWNEWNWENEENNESESENWENENNSWWESSSNNSSENSNEWNWSNNEWNSSSWSWWWSSENSSSSNWSNEWWEESSNWSNWWEENSENENEENSENWSSSENENNENSWNWWENNEWEENSWEESESWSSWEESSSNENENEEWENENSSWEWNEWNSEESEWSESENNNENEWSWSEWSWEEEENENENSWNNEWSEENWNSWWNWNEENEEEWNENNSWENSSNSEWESWESWWNNNSEESSSSEESWWNWESWSESWSEENSSSSWWNWEWEESESESSWWSWSNESWESNNSSSWSSESENSWWNWSEWWNENSESSWEWWNENENESWNEEWWNSESEEWNWEENEWWEWSSWNNNWNESWWSSEWSENNSWNNNNWESNNWSSSWWNEWEWNEWSSEEWWWWWWSSWNSSNESNNNENNEWSWNSEEEENWNNSSSESSENSSSNWWSEWWWENNSWWWWSNWENSESWNNWNEEWSSWSSSNEWSSNSWWEESESWSSSESNWNSESNNNWSEWNWEWNEESSEEEWEEWNNSNWNENEEENNWNNESWNSWSESSWNNWSESWNEENWNNWNSNWNNNNWEESWESWWWSWWESNWNWWEEWSNSWNNENWESEEWWESSNESEWEWEWNENESSENEEESNNSENWSWNSWEENEWEWWESSWNSWESENNWESNWWNEWWNEENWENSEWEESEESSESNWWWWEEENNNNSNENWNNWEWNNWWSSNEEENENWSSENWWEESEWSSWNWWNSSWEWENSESSNNNENNWSWEENSNNESWNEWWWNNEENSNWWEWEENWNWWENWNWSESWNSWSWENSNNWEWEESSSWEWNNSNSNWWSNWSNSWNSSEWSENNNSSENNWNNNWNSSNSWWENEENSNWSNSWEEEWWSWESNESENEEWEESWSNSNWNEEWSSWENSNWWSNSENWESNNNEEWSNSNNNENEEWNSWSWSNSWNSNESEWEWSEEWENWSENEEWNEESNWSESEWSSSEENEWENSWWNNSSNNESSSSNWNSSWNWNWNWSWWENSWWWWENEWWENENWSWWEEWNSWWWWWNWESEWNEENSESSSNWEENWSNWESENNWNSNNESESWENSSNEWWSNWNSNEESWSSSWWSENSSSWNWNSEEWSNSEWSWWSWWWNNSSWWWNSSESNSNNSSSSEESSSENWWNNNSSSWSNSESNSESNWNNSNWWWWWNEEESEWWSNWNWSENSSESEESSNEESSWENSESNSWWEEENESEWNESNEESENSESSEENWWSSEEEWSWWEEWSEEEESESEWSSSNWSNNWWSWSEWWSEEWESWSSNENSNWENNEEWWWNSNSEENWSNENSWNNSESNEEWNSSSSNNWEEWSWSWWSSWWSSWEWWWWWEWEEWNSWNNENEESNEEWSNNEWWSSSWSSSWWNNENNWSEWEWEEESNESNESEEEWSNSEEWEWNSEESENNSWNEWWEWNWSWSWWEWWNENSNWEWENNESSWWSESSWSEWESWNWWWWSWWNWNSNSWWEENSSWSWESESWEESSNSNNSWNNENNWWNWWNWNWESSWWWWWWNENEWSSWWWNENSNEESWNENNWWEWWENENEENWNNNSSEENWNENNWWEWNSSSWWWWNSESWSESSSNENSSENWEWWNWWWESWENNNSWENSNNNWSNESNSWSSSEWENSWNWENEWSEWEESEEESWENWNWNSENEENEEWNEWSNNSNWWSSNEWNWEWESESEESWENWNSSNESENWNWNSNENENWSNWWWSNWSSESNEWENENWWSSNNNENESSSNEENENENWEWWWWNNNESSSNEEEEESNESEWSSNWESWSWWSESEWEEENNESWSWEWSNEWSNWEEWWESNSSSSNWWSSESEWSESESEWWNWSNWSNNSENSEENNSSNSSNEEESEWWNEEWSWNNSESNENNWSWENSSNWNEWNSNSESEWNNWENSWSWWNENNSSWWNWWNNWEWNSEEENWSNEWNWWSEEWSESNNNNWWSSWNWNNNSSNEESEWSNENSNNEENNWNNNWNWWSWSWWWEEEWSSSEWESESENSEESNNWSWWNEEWSNWWSWSWESSEEWESEEWWSENNNNSSWENNNWEWNNWESSEESSNWNSSEWNSEEEWSESWWSNWSWNNSENENNWENEWENENWEWNNNEENESNWEWWNSNEWSESNWESENNWENWWESWNEWWSSESNSWSWWWWSEENSSSSWWEWWSNSSSNSNSEESEESNNNSENEWWEESNWWENSNSNESEEEWNWSNNSENEEWEWEEENNWESNSESEWSNEENNSWWWNNSEWSWWSWNSSENENWESSWWWWSESWWWWSSWNWNNEWEENWWEEWESSSWNEWSNEWWSWWNEWNWNEEEENSEESSESNWEWWNWSNWEEEENSSEWNWENWNSNEENSWEWWSENENNWNSWSESNNNESNWWESWSWEWSEENWWWEEEESENEEEWEEWSNSENNWNNEEEESESWSWENWENESSWEESSSSSESWWSEWEEESNENEWSSNEEENWNSSSNNNESEWSNSESEESNNWNESENSNSNNEESNSWNSSSNSSWEESSWWWSSNSSSNESESESEESENESWSEENENNWWEWWWSWWNEENWEWSENWSSEEEWNEWNWWNWENNWWWNWNEEEEEWWNSNENESNWEESEWEWSENSSSWEWEESEEEEWNNSNESNEESSSSSSWSWWNNSEWENNNWNENNWWNWNNWSWNESESWNNNNSNWEWSWSNWEWSEEENSESENWENESWWSNNSSNESESEESSEEWSNWNWEEWESNENENEESSWWNEEESSWEWWWEEEEWWNWNEEWEWEEWESNNEEENEENENEEENNWWWWESSWEEESSWSWNEESESSNWSSWWEEEENNNWEEWNWWSNWSWWSSWENNNNNSENSEENWWNNSNNWWWENNNWNNENSENESSESNNNSEEEEWNESENSWNSWNWWESWWWSEEEWNNNSSNEWNWEWSSSWNEEEENNWEWEENESSNSNEESWNNEWWEWWNSWNSWWNWWNNESENWWNSSWNEESWEWSSWNSNWSNNEWENSEEESWSNSNNNSNESEEEWEWWWWWSSENWNEESWENWSNNWWWNWWSNEWSNENWSNSEESNWEWEWSWESENWSSNNNSNEWESWEESNWNEWNESSSEWEWWWSSEWSSNWNEEWEEWSEENSWSNENNSEWNNEWNWEEEWEWNWWSSNWSSNNNSNESSNSSNNNSSENNSNSSENWWWSSESNWENSSWSNNESSNESSEENSNSWNWSESNWEWSSENEESSNSENEWSSNEESEESWWESNSWNWSWESESWWWESNNSENWENWWNNWENNSSEESEWNNWENSNWSNNWSESWWSNSESEENSESNSEESSNWSSNWWWSEESNSWESSSEWNEEWEENSWEENESNWNSESESEWEESENSEWENSWNNEWSEEEWNNWWWWWESWEWNNENEESWSSEWNEWWSWWSNNEWEWNNSSSEWWWEEWWSESSNSWNEWSWWEWENENWEENNNWSSNSSEWWWWWEWWSEEESENWNWESNENESSNESSNNNWWSWSENSWWWNWSENNEWEEEWWNEWNSWESSSESWWESNWSNNWSSNWWSNWEWWWWSESEWSSSNNWSWSSESNNSWSESESWEESWEWESEEWSESWSENNNSWEWWWWSNNNESNNSEESNSWSEWEWSWSNNNSWSWNNWEWSSWSSSWNNENSWNENENSNEEENEEEENSNSNWWNSNEWSSNWNSWNSSEESSWNEEESWWWNNNNWNWSSWSWNWEWNEWESESSENWESWEEWSWSESEWSNENWNWENNSNNWNSEWESEWWWWNWWNWENSENNWWNWNWNNWWWWEWSNEWSNNWSSWNESEEEWWWWESNWEWEEEWNWWSEESNENWWEWEWWNWNNWSEWNNNNNNSSNSESSWEWWNESSENESWEWSSWENSSSEWESNNWSNNSEEWWNSSEWSSNNWEWENNSSWEWWWSNSSSEWSESWWNWNSWNNEENEWWENWNSWSWWENWWSNWSWEESWSNSNSWEWNNWNNESEEESEWSSWNNEWWNENNESWNWENSEWNWNWEWNNWNNSSWWESNWWWEWNSWNSENSEEWSSNWEEENWENNNEENSSESEWSNSEESWWWWWNNWWNWNEENNSEESEEEWNESENWWNESENSWEEWNNNNSSSNNSWWWWNNNEEEWSENNEEEESWSESNNEEESNNENESEWWSSSNWEENWNESNESENNWESSSWNWSWNNWEEENEWNNSWNWWNNENWENWSWSSWEWEWNEWSWNWWEEESWWSWWWWWWESWNWNEWEENENSEENNNEENSESWWSWNSNNENSESNSSNSENNNNWENEESNNENWNSNEWSSSEWEWENWEEWWEWSWNEEEENENNESWSNSSNNWEEEWSEWNNSENNENWNENSNENEWWSENNWWESWNWWESESWNEENSEWNSWSWESENENWSNNNWNNSWSESEENSNESSSNNNWENNNSESEWWNSESSWENWWWENWEWNNSSNWSENSEWNSEENWSEESNNWNEEESNEEWWSSWEWWNEWENESSESWSSESWNESNNEENNWEESSNNSSNNWNNSSEEWSNWNNEENNWSEEWNWESWSSWESNWEWEEEEWSNNSESNWWWEEENENNEWSNSEWEWSWNSNNNSNWWEWSSEEWWNNSWENSENSWSNSNWESWENENNSWNEWEESNSWEWEWSNSSEWNSEESSWWSSEWWENNNESWNWWNESNWWWNWWWWESNENSSWESESSWSSEWESNWWSNESSEWSNSWESSSSWEENSWWSNWEEENEWWEWNSSEEEEEEESESWSNEEEENSENEENSWSENNENWSNNSEEWEWENNSSNSWWNENEWSSESENSESNEWSNSNNWSNNSWSSEWESEESESWSNNWNSESNNEWWWESESEEWWNNNSWENSWNEEEEWSSWNNNWNSSNENEEWWNSNEWESNWNSSSSNWEEEWNSESEENWEENENNSEWWEWNWENSNSSWSSSENENNWESSNNSSENNSWWWESSSENNNEWEEEWENWSNSEESEEEENSNNWWNWWWNSENEWEESNWEESNNENENESWNNENEWWWSENSWESSSEENSS"
    path = "NNSWWEWSSESSWENNW"

    # res = isPathCrossing(path)
    # print(res)

    res_2 = isPathCrossingPlus(path)
    print(res_2)
